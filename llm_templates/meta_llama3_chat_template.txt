{% if messages[0]['role'] != 'system' %}
{{ raise_exception('Meta-Llama-3 expects system message first.') }}
{% endif %}
<|begin_of_text|>
{% for message in messages %}
<|start_header_id|>{{ message['role'] }}<|end_header_id|>
{{ message['content'] }}<|eot_id|>
{% endfor %}
{% if add_generation_prompt %}
<|start_header_id|>assistant<|end_header_id|>
{% endif %}
